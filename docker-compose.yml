version: '3.1'

services:

    db:
        image: mysql:5.7
        ports:
               - 3306:3306
        environment:
            MYSQL_ROOT_PASSWORD: my-secret-pwd
        volumes:
            - ./docker-entrypoint-initdb.d:/docker-entrypoint-initdb.d

    dbtest:
        image: java:alpine
        restart: always
        volumes:
            - ./wait-for-port.sh:/var/wait-for-port.sh:z
        command: ["/var/wait-for-port.sh", "-q", "db:3306", "--", "ls"]
        depends_on:
            - db

